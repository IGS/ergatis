  <!--Begin iterator twig-->
  <command>
    <type>RunJavaUnixCommand</type>
    <name>Create iterator $;ITERATOR_KEY$; groupings</name>
    <state>incomplete</state>
    <executable>$;BIN_DIR$;/create_iterator_groups</executable>
    <param>
      <key>--input_file_list</key>
      <value>$;INPUT_FILE_LIST$;</value>
    </param>
    <param>
      <key>--input_file</key>
      <value>$;INPUT_FILE$;</value>
    </param>
    <param>
      <key>--input_directory</key>
      <value>$;INPUT_DIRECTORY$;</value>
    </param>
    <param>
      <key>--input_directory_extension</key>
      <value>$;INPUT_EXTENSION$;</value>
    </param>
    <param>
      <key>--group_count</key>
      <value>$;GROUP_COUNT$;</value>
    </param>
    <param>
      <key>--output_directory</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;</value>
    </param>
    <param>
      <key>--output_iter_list</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;.iter</value>
    </param>
    <param>
      <key>--group_size_limit</key>
      <value>1000</value>
    </param>
  </command>
  <command>
    <type>RunJavaUnixCommand</type>
    <name>replace_template_keys</name>
    <state>incomplete</state>
    <executable>$;BIN_DIR$;/replace_template_keys</executable>
    <param>  
      <key>--template_xml</key>
      <value>$;WORKFLOWDOCS_DIR$;/groups_template.xml</value>
    </param>
    <param>  
      <key>--component_conf</key>
      <value>$;COMPONENT_CONFIG$;</value>
    </param>
    <param>  
      <key>--iterator_list_dir</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;</value>
    </param>
    <param>  
      <key>--iterator_list</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;.iter</value>
    </param>
    <param>  
      <key>--iterator_list_key</key>
      <value>GROUP_XML</value>
    </param>
    <param>  
      <key>--iterator_output_xml</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;/$;ITERATOR_KEY$;.xml</value>
    </param>
    <param>  
      <key>--keys</key>
      <value>ITERATOR_TOKEN=$;ITERATOR_KEY$;,ITERATOR_XML=$;ITERATOR_KEY$;_XML$;</value>
    </param>
    <param>  
      <key>--distribopts</key>
      <value>nodistrib=$;NODISTRIB$;</value>
    </param>
  </command>
  <!--The following command can be deprecated once Workflow supports distributed-->
  <command>
    <type>RunJavaUnixCommand</type>
    <state>incomplete</state>
    <name>create_distributed_iterator_xml</name>
    <executable>$;BIN_DIR$;/create_distributed_iterator_xml</executable>
    <param>  
      <key>--input_xml</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;/$;ITERATOR_KEY$;.xml</value>
    </param>
    <param>  
      <key>--output_xml</key>
      <value>$;WORKFLOW_REPOSITORY$;/$;ITERATOR_KEY$;/$;ITERATOR_KEY$;.xml</value>
    </param>    
    <param>  
      <key>--runcmd</key>
      <value>$;BIN_DIR$;/run_wf</value>
    </param>    
    <param>  
      <key>--nodistrib</key>
      <value>$;NODISTRIB$;</value>
    </param>
  </command>
  <commandSet type="parallel">
    <state>incomplete</state>
    <name>Iterator $;ITERATOR1$;</name>
    <fileName>$;WORKFLOW_REPOSITORY$;/$;ITERATOR1$;/$;ITERATOR1$;.xml</fileName>
  </commandSet>
  <!--End iterator twig-->
  
